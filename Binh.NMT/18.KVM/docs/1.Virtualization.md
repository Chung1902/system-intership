# TÌM HIỂU VỀ ẢO HÓA
## 1. Ảo hóa là gì?
Ảo hóa là công nghệ cho phép tạo ra các môi trường ảo của tài nguyên vật lý như máy chủ, lưu trữ hoặc mạng từ một máy vật lý duy nhất. 
## 2. Có những loại ảo hóa nào?
Ảo hóa gồm có những loại sau:
- Desktop virtualization.
- Network virtualization.
- Storage virtualization.
- Data virtualization.
- Application virtualization.
- Data center virtualization.
- CPU virtualization.
- GPU virtualization.
- Linux virtualization.
- Cloud virtualization.

![](../imgs/1.png)
## 3. Đặc điểm của từng loại ảo hóa
### 3.1 Ảo hóa máy tính để bàn
Ảo hóa desktop cho phép tạo ra nhiều máy ảo, mỗi máy ảo chạy một hệ điều hành độc lập trên cùng một phần cứng vật lý.

Có 2 kiểu ảo hóa desktop:
- **Virtual desktop infrastructure:** VDI sử dụng một hoặc nhiều server mạnh mẽ được cài hypervisor để tạo ra hàng loạt VM, mỗi VM chứa một hệ điều hành (Windows, Linux,...) và cấu hình riêng. Người dùng dùng các thiết bị nhẹ (máy tính chỉ cần đủ khả năng hiển thị hình ảnh) hoặc phần mềm client trên PC/laptop để sử dụng các VM này. Các giao thức như RDP, PCoIP hay HDX truyền giao diện desktop từ VM về client. 
- **Local desktop virtualization:** LDI cài một phần mềm như VMWare Workstation, Oracle VirtualBox, Parallels Desktop (Mac) hoặc Hyper-V để tự tạo và cấu hình một hay nhiều VM trên máy tính cá nhân.
### 3.2 Ảo hóa mạng
Ảo hóa mạng là kỹ thuật trừu tượng hóa các thành phần vật lý của mạng - như cáp, switch, router, firewall,... - thành các thực thể mạng ảo, được quản lý hoàn toàn bằng phần mềm. Tương tự VM cho server, một lớp phần mềm (“hypervisor mạng”) được đặt giữa phần cứng và các dịch vụ mạng.

1. **Tiếp nhận yêu cầu từ dịch vụ mạng (network services):** Khi ứng dụng hay thành phần mạng (ví dụ: một virtual switch, virtual router) muốn gửi gói tin, nó sẽ gọi API hoặc driver mạng ảo.
2. **Trừu tượng hóa và chuyển tiếp xuống phần cứng:** Lớp hypervisor mạng bắt các yêu cầu này, ánh xạ chúng sang các thiết bị mạng vật lý (card mạng, switch, router thật) hoặc sang các cấu hình ảo hóa phần cứng (ví dụ SR-IOV, PCI passthrough).
3. **Trả kết quả lên dịch vụ mạng ảo:** Khi phần cứng vật lý xử lý xong (ví dụ forward gói tin, phân tích traffic), hypervisor mạng nhận kết quả và “đưa” trở lại cho thành phần mạng ảo.

Các loại ảo hóa mạng bao gồm:
- `Software Defined Networking:` Kiến trúc mạng theo hướng SDN ảo hóa phần cứng điều khiển định tuyến lưu lượng mạng. Việc này được thực hiện thông qua một nền tảng tập trung gọi là control plane, giúp quản lý hạ tầng CNTT và định hướng lưu lượng mạng.
- `Network Function Virtualization:` NFV ảo hóa một hoặc nhiều thiết bị phần cứng đảm nhiệm chức năng mạng cụ thể (ví dụ: tường lửa, bộ cân bằng tải, bộ phân tích lưu lượng), giúp các thành phần này dễ dàng cấu hình, triển khai và quản lý hơn.
### 3.3 Ảo hóa lưu trữ
Ảo hóa lưu trữ cho phép tất cả các thiết bị lưu trữ trong mạng, dù được cài đặt trên các máy chủ riêng lẻ hay các thiết bị lưu trữ độc lập, đều có thể được truy cập và quản lý như một thiết bị lưu trữ duy nhất. Cụ thể, ảo hóa lưu trữ hợp nhất tất cả các khối lưu trữ thành một kho lưu trữ dùng chung, từ đó có thể phân bổ cho bất kỳ máy ảo (VM) nào trong mạng khi cần. Công nghệ này giúp việc cấp phát dung lượng lưu trữ cho VM dễ dàng hơn và tận dụng tối đa toàn bộ dung lượng lưu trữ khả dụng trên mạng.

Các nhà cung cấp dịch vụ đám mây dựa vào ảo hóa lưu trữ để cung cấp các dịch vụ lưu trữ đám mây, bao gồm lưu trữ khối (block storage), lưu trữ đối tượng (object storage) và lưu trữ tệp (file storage).
### 3.4 Ảo hóa dữ liệu
Các doanh nghiệp hiện đại lưu trữ dữ liệu từ nhiều ứng dụng khác nhau bằng nhiều định dạng tệp tại nhiều vị trí, từ đám mây đến các hệ thống phần cứng và phần mềm tại chỗ. Ảo hóa dữ liệu cho phép bất kỳ ứng dụng nào truy cập toàn bộ dữ liệu đó, bất kể nguồn, định dạng hay vị trí lưu trữ.

Các công cụ ảo hóa dữ liệu tạo ra một lớp phần mềm nằm giữa các ứng dụng truy cập dữ liệu và các hệ thống lưu trữ dữ liệu. Lớp này sẽ dịch yêu cầu hoặc truy vấn dữ liệu của ứng dụng khi cần, và trả về kết quả có thể bao gồm dữ liệu từ nhiều hệ thống khác nhau. Ảo hóa dữ liệu có thể giúp phá vỡ các “hầm chứa dữ liệu” (data silo) khi các phương pháp tích hợp khác không khả thi, không phù hợp hoặc quá tốn kém.
### 3.5 Ảo hóa ứng dụng
Ảo hóa ứng dụng cho phép chạy phần mềm ứng dụng mà không cần cài đặt trực tiếp trên hệ điều hành của người dùng. Công nghệ này khác với ảo hóa toàn bộ máy tính để bàn ở chỗ chỉ ứng dụng chạy trong môi trường ảo, còn hệ điều hành trên thiết bị của người dùng cuối vẫn hoạt động như bình thường.

Có ba loại ảo hóa ứng dụng:
- **Local application virtualization:** Toàn bộ ứng dụng chạy trên thiết bị đầu cuối, nhưng chạy trong một môi trường thời gian chạy (runtime environment) thay vì trực tiếp trên phần cứng gốc.
- **Application streaming:** Ứng dụng được lưu trữ trên máy chủ và gửi các thành phần phần mềm nhỏ xuống thiết bị của người dùng cuối khi cần.
- **Server-based application virtualization:** Ứng dụng chạy hoàn toàn trên máy chủ và chỉ gửi giao diện người dùng tới thiết bị khách.
### 3.6 Ảo hóa trung tâm dữ liệu
Ảo hóa trung tâm dữ liệu trừu tượng hóa hầu hết phần cứng của trung tâm dữ liệu thành phần mềm, cho phép quản trị viên chia một trung tâm dữ liệu vật lý duy nhất thành nhiều trung tâm dữ liệu ảo phục vụ cho các khách hàng khác nhau.

Mỗi khách hàng có thể truy cập vào hạ tầng như một dịch vụ (IaaS) riêng của mình, hoạt động trên cùng một phần cứng vật lý bên dưới. Các trung tâm dữ liệu ảo mang lại cách thức dễ dàng để tiếp cận điện toán đám mây, giúp doanh nghiệp nhanh chóng thiết lập một môi trường trung tâm dữ liệu hoàn chỉnh mà không cần mua sắm phần cứng hạ tầng.
### 3.7 Ảo hóa CPU
Ảo hóa bộ xử lý trung tâm (CPU) là công nghệ nền tảng giúp cho trình quản lý máy ảo (hypervisor), máy ảo (VM) và các hệ điều hành khác nhau hoạt động. Công nghệ này cho phép một CPU duy nhất được chia thành nhiều CPU ảo để nhiều máy ảo có thể sử dụng.

Ban đầu, ảo hóa CPU hoàn toàn được định nghĩa bằng phần mềm, nhưng hiện nay nhiều bộ vi xử lý đã tích hợp các tập lệnh mở rộng hỗ trợ ảo hóa CPU, giúp cải thiện hiệu suất của máy ảo.
### 3.8 Ảo hóa GPU
Bộ xử lý đồ họa (GPU) là một bộ xử lý đa lõi đặc biệt giúp cải thiện hiệu suất tính toán tổng thể bằng cách đảm nhận các tác vụ xử lý đồ họa hoặc toán học nặng. Ảo hóa GPU cho phép nhiều máy ảo (VM) sử dụng toàn bộ hoặc một phần sức mạnh xử lý của một GPU duy nhất để tăng tốc các ứng dụng liên quan đến video, trí tuệ nhân tạo (AI) và các tác vụ đồ họa hoặc tính toán chuyên sâu khác.

Hai loại GPU chính trong môi trường ảo hóa là:
- **Pass-through GPUs:** Cho phép toàn bộ GPU được sử dụng bởi một hệ điều hành khách (guest OS) duy nhất.
- **Shared vGPUs:** Chia các lõi GPU vật lý thành nhiều GPU ảo (vGPU) để nhiều máy ảo trên máy chủ có thể sử dụng.
### 3.9 Ảo hóa Linux
Linux bao gồm hypervisor riêng, gọi là Kernel-based Virtual Machine (KVM), hỗ trợ các phần mở rộng ảo hóa của Intel và AMD để tạo ra các VM x86 ngay trong hệ điều hành Linux chủ. 
### 3.10 Ảo hóa đám mây
Bằng cách ảo hóa máy chủ, lưu trữ và các tài nguyên vật lý khác của trung tâm dữ liệu, các nhà cung cấp dịch vụ điện toán đám mây có thể cung cấp cho khách hàng một loạt dịch vụ, bao gồm những dịch vụ sau:
- `Cơ sở hạ tầng như một dịch vụ (Infrastructure as a Service – IaaS):` Mô hình cung cấp IaaS đem đến tài nguyên máy chủ ảo, lưu trữ ảo và mạng ảo có thể tự cấu hình theo yêu cầu của mình.
- `Nền tảng như một dịch vụ (Platform as a Service – PaaS):` Mô hình dịch vụ PaaS cung cấp các công cụ phát triển ảo, cơ sở dữ liệu và các dịch vụ đám mây khác để xây dựng ứng dụng và giải pháp trên nền tảng đám mây.
- `Phần mềm như một dịch vụ (Software as a Service – SaaS):` Phần mềm như một dịch vụ đề cập đến các ứng dụng được lưu trữ trên đám mây. SaaS là mô hình dịch vụ đám mây được sử dụng rộng rãi nhất.
## 4. Cách thức hoạt động của ảo hóa
Ảo hóa phụ thuộc vào hai khái niệm quan trọng: Virtual Machine và Hypervisor.
- **Máy ảo (VM):** là một môi trường máy tính hoạt động như một hệ thống tách biệt với CPU, hệ điều hành (OS), bộ nhớ, giao diện mạng và lưu trữ riêng, được tạo ra từ một tập hợp các tài nguyên phần cứng. Công nghệ ảo hóa cho phép nhiều máy ảo với các hệ điều hành khác nhau chạy đồng thời trên cùng một thiết bị vật lý — ví dụ như chạy môi trường MacOS hoặc Windows trên hệ thống Linux.
- **Hypervisor:** là phần mềm tách nguồn tài nguyên vật lý của hệ thống và chia nhỏ chúng để các môi trường ảo có thể sử dụng theo nhu cầu. Hypervisor lấy tài nguyên vật lý (CPU, bộ nhớ, lưu trữ…) từ phần cứng và phân bổ cùng lúc cho nhiều VM, cho phép tạo mới và quản lý các VM hiện có. Hypervisor có thể chạy trên một hệ điều hành (như trên laptop) hoặc cài trực tiếp lên phần cứng (như trên server). Phần cứng vật lý khi dùng làm hypervisor được gọi là host, còn từng VM sử dụng tài nguyên của nó được gọi là guest.

Tài liệu tham khảo:

[1] (https://www.ibm.com/think/topics/virtualization)

[2] (https://www.redhat.com/en/topics/virtualization/what-is-virtualization)

